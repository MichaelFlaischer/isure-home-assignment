<div class="modal-backdrop" *ngIf="visible">
  <div class="modal">
    <header class="modal-header">
      <div>
        <p class="eyebrow">{{ todo ? 'Update step' : 'Add new step' }}</p>
        <h2>{{ todo ? 'Edit Mission Step' : 'New Mission Step' }}</h2>
      </div>
      <button type="button" class="icon" (click)="onClose()" aria-label="Close dialog">&times;</button>
    </header>

    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <label class="field">
        <span>Task name *</span>
        <input type="text" formControlName="title" placeholder="What needs to be done?" />
        <small class="error" *ngIf="form.controls.title.invalid && form.controls.title.touched">
          Task name is required.
        </small>
      </label>

      <label class="field">
        <span>Description</span>
        <textarea rows="3" formControlName="description" placeholder="Add details (optional)"></textarea>
      </label>

      <label class="checkbox">
        <input type="checkbox" formControlName="isCompleted" />
        <span>Mark this step as done</span>
      </label>

      <div class="modal-actions">
        <button type="button" class="secondary" (click)="onClose()">Cancel</button>
        <button type="submit" class="primary">{{ todo ? 'Save Changes' : 'Add Step' }}</button>
      </div>
    </form>
  </div>
</div>
